(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";
var binaryTree_1 = require("./components/binaryTree");
var node_1 = require("./components/node");
var BT = new binaryTree_1.default();
BT.add(new node_1.default(33));
BT.add(new node_1.default(5));
BT.add(new node_1.default(35));
BT.add(new node_1.default(1));
BT.add(new node_1.default(20));
BT.add(new node_1.default(99));
BT.add(new node_1.default(4));
BT.add(new node_1.default(17));
BT.add(new node_1.default(31));
console.log(JSON.stringify(BT, null, 4));
BT.remove(5);
BT.remove(99);
BT.remove(33);
console.log(JSON.stringify(BT, null, 4));
},{"./components/binaryTree":2,"./components/node":3}],2:[function(require,module,exports){
"use strict";
var BinaryTree = (function () {
    function BinaryTree() {
        this.clear();
    }
    BinaryTree.prototype.add = function (element) {
        var currentElement = this._root;
        if (currentElement === null) {
            this._root = element;
            this._count++;
            return element;
        }
        while (currentElement !== null) {
            if (currentElement.key > element.key) {
                if (currentElement.left === null) {
                    currentElement.left = element;
                    this._count++;
                    break;
                }
                else {
                    currentElement = currentElement.left;
                }
            }
            else if (currentElement.key < element.key) {
                if (currentElement.right === null) {
                    currentElement.right = element;
                    this._count++;
                    break;
                }
                else {
                    currentElement = currentElement.right;
                }
            }
            else {
                console.log("Node -[" + element.key + "]- already exists");
                return;
            }
        }
    };
    BinaryTree.prototype.contains = function (element, tree) {
        if (tree === void 0) { tree = this._root; }
        var isFound = false, currentElement = tree, result = null, parent = null;
        while (currentElement !== null) {
            if (currentElement.key > element) {
                parent = currentElement;
                currentElement = currentElement.left;
            }
            else if (currentElement.key < element) {
                parent = currentElement;
                currentElement = currentElement.right;
            }
            else {
                result = currentElement;
                isFound = true;
                break;
            }
        }
        return { isFound: isFound, result: result, parent: parent };
    };
    BinaryTree.prototype.remove = function (value, tree, isRecursively) {
        if (tree === void 0) { tree = this._root; }
        if (isRecursively === void 0) { isRecursively = false; }
        var searchResult = this.contains(value, tree), parentNode = searchResult.parent, foundNode;
        if (searchResult.isFound) {
            foundNode = searchResult.result;
            if (!isRecursively) {
                this._count--;
            }
            if (foundNode.right === null) {
                if (foundNode.left === null) {
                    // case when node is leaf
                    foundNode.key = null;
                    this.removeNullLeaf(parentNode);
                }
                else {
                    // case when node doesn't contain right node, buy has left node;
                    var leftNode = foundNode.left;
                    foundNode.key = leftNode.key;
                    foundNode.right = leftNode.right;
                    foundNode.left = leftNode.left;
                }
            }
            else {
                // case if node has right child
                var leftMost = foundNode.right, parentLeft = null;
                if (leftMost.left !== null) {
                    // case if right child has left node
                    while (leftMost.left !== null) {
                        parentLeft = leftMost;
                        leftMost = leftMost.left;
                    }
                    foundNode.key = leftMost.key;
                    this.remove(leftMost.key, parentLeft, true);
                }
                else {
                    // case if right child doesn't have left node
                    foundNode.key = leftMost.key;
                    foundNode.right = leftMost.right;
                }
            }
        }
        else {
            console.log("Node -[" + value + "]- doesn't exist");
        }
    };
    BinaryTree.prototype.removeNullLeaf = function (tree) {
        if (tree.left && tree.left.key === null) {
            tree.left = null;
        }
        else if (tree.right && tree.right.key === null) {
            tree.right = null;
        }
        return tree;
    };
    BinaryTree.prototype.size = function () {
        return this._count;
    };
    BinaryTree.prototype.clear = function () {
        this._root = null;
        this._count = 0;
    };
    BinaryTree.prototype.min = function () {
        var currentNode = this._root;
        while (currentNode.left && currentNode.left.key !== null) {
            currentNode = currentNode.left;
        }
        return currentNode;
    };
    BinaryTree.prototype.max = function () {
        var currentNode = this._root;
        while (currentNode.right && currentNode.right.key !== null) {
            currentNode = currentNode.right;
        }
        return currentNode;
    };
    return BinaryTree;
}());
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = BinaryTree;
},{}],3:[function(require,module,exports){
"use strict";
var Node = (function () {
    function Node(key) {
        this.key = key;
        this.left = null;
        this.right = null;
    }
    return Node;
}());
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = Node;
},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYXBwLnRzIiwic3JjL2NvbXBvbmVudHMvYmluYXJ5VHJlZS50cyIsInNyYy9jb21wb25lbnRzL25vZGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FDQUEsMkJBQXVCLHlCQUF5QixDQUFDLENBQUE7QUFDakQscUJBQWlCLG1CQUFtQixDQUFDLENBQUE7QUFFckMsSUFBSSxFQUFFLEdBQUcsSUFBSSxvQkFBVSxFQUFFLENBQUM7QUFFMUIsRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLGNBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3JCLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxjQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNwQixFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksY0FBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDckIsRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLGNBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3BCLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxjQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNyQixFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksY0FBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDckIsRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLGNBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3BCLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxjQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNyQixFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksY0FBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFFckIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztB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LEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDZixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNqQixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztJQUN0QixDQUFDO0lBQ0wsV0FBQztBQUFELENBVkEsQUFVQyxJQUFBO0FBVkQ7c0JBVUMsQ0FBQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgQmluYXJ5VHJlZSBmcm9tIFwiLi9jb21wb25lbnRzL2JpbmFyeVRyZWVcIjtcclxuaW1wb3J0IE5vZGUgZnJvbSBcIi4vY29tcG9uZW50cy9ub2RlXCI7XHJcblxyXG5sZXQgQlQgPSBuZXcgQmluYXJ5VHJlZSgpO1xyXG5cclxuQlQuYWRkKG5ldyBOb2RlKDMzKSk7XHJcbkJULmFkZChuZXcgTm9kZSg1KSk7XHJcbkJULmFkZChuZXcgTm9kZSgzNSkpO1xyXG5CVC5hZGQobmV3IE5vZGUoMSkpO1xyXG5CVC5hZGQobmV3IE5vZGUoMjApKTtcclxuQlQuYWRkKG5ldyBOb2RlKDk5KSk7XHJcbkJULmFkZChuZXcgTm9kZSg0KSk7XHJcbkJULmFkZChuZXcgTm9kZSgxNykpO1xyXG5CVC5hZGQobmV3IE5vZGUoMzEpKTtcclxuXHJcbmNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KEJULCBudWxsLCA0KSk7XHJcblxyXG5CVC5yZW1vdmUoNSk7XHJcbkJULnJlbW92ZSg5OSk7XHJcbkJULnJlbW92ZSgzMyk7XHJcblxyXG5jb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShCVCwgbnVsbCwgNCkpOyIsImltcG9ydCBOb2RlIGZyb20gXCIuL25vZGVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpbmFyeVRyZWUge1xyXG4gICAgX3Jvb3Q6IE5vZGU7XHJcbiAgICBfY291bnQ6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYWRkKGVsZW1lbnQ6IE5vZGUpIHtcclxuICAgICAgICBsZXQgY3VycmVudEVsZW1lbnQgPSB0aGlzLl9yb290O1xyXG4gICAgICAgIGlmIChjdXJyZW50RWxlbWVudCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9yb290ID0gZWxlbWVudDtcclxuICAgICAgICAgICAgdGhpcy5fY291bnQrKztcclxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdoaWxlIChjdXJyZW50RWxlbWVudCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudEVsZW1lbnQua2V5ID4gZWxlbWVudC5rZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50RWxlbWVudC5sZWZ0ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEVsZW1lbnQubGVmdCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEVsZW1lbnQgPSBjdXJyZW50RWxlbWVudC5sZWZ0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRFbGVtZW50LmtleSA8IGVsZW1lbnQua2V5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEVsZW1lbnQucmlnaHQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50RWxlbWVudC5yaWdodCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEVsZW1lbnQgPSBjdXJyZW50RWxlbWVudC5yaWdodDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBOb2RlIC1bJHtlbGVtZW50LmtleX1dLSBhbHJlYWR5IGV4aXN0c2ApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjb250YWlucyhlbGVtZW50OiBOdW1iZXIsIHRyZWU6IE5vZGUgPSB0aGlzLl9yb290KSB7XHJcbiAgICAgICAgbGV0IGlzRm91bmQgPSBmYWxzZSxcclxuICAgICAgICAgICAgY3VycmVudEVsZW1lbnQgPSB0cmVlLFxyXG4gICAgICAgICAgICByZXN1bHQgPSBudWxsLFxyXG4gICAgICAgICAgICBwYXJlbnQgPSBudWxsO1xyXG4gICAgICAgIHdoaWxlIChjdXJyZW50RWxlbWVudCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudEVsZW1lbnQua2V5ID4gZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50ID0gY3VycmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50RWxlbWVudCA9IGN1cnJlbnRFbGVtZW50LmxlZnQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudEVsZW1lbnQua2V5IDwgZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50ID0gY3VycmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50RWxlbWVudCA9IGN1cnJlbnRFbGVtZW50LnJpZ2h0O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gY3VycmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBpc0ZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7aXNGb3VuZCwgcmVzdWx0LCBwYXJlbnR9O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmUodmFsdWU6IE51bWJlciwgdHJlZTogTm9kZSA9IHRoaXMuX3Jvb3QsIGlzUmVjdXJzaXZlbHk6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gICAgICAgIGxldCBzZWFyY2hSZXN1bHQgPSB0aGlzLmNvbnRhaW5zKHZhbHVlLCB0cmVlKSxcclxuICAgICAgICAgICAgcGFyZW50Tm9kZSA9IHNlYXJjaFJlc3VsdC5wYXJlbnQsXHJcbiAgICAgICAgICAgIGZvdW5kTm9kZTtcclxuICAgICAgICBpZihzZWFyY2hSZXN1bHQuaXNGb3VuZCkge1xyXG4gICAgICAgICAgICBmb3VuZE5vZGUgPSBzZWFyY2hSZXN1bHQucmVzdWx0O1xyXG4gICAgICAgICAgICBpZighaXNSZWN1cnNpdmVseSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY291bnQtLTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihmb3VuZE5vZGUucmlnaHQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGlmKGZvdW5kTm9kZS5sZWZ0ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSB3aGVuIG5vZGUgaXMgbGVhZlxyXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kTm9kZS5rZXkgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlTnVsbExlYWYocGFyZW50Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhc2Ugd2hlbiBub2RlIGRvZXNuJ3QgY29udGFpbiByaWdodCBub2RlLCBidXkgaGFzIGxlZnQgbm9kZTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbGVmdE5vZGUgPSBmb3VuZE5vZGUubGVmdDtcclxuICAgICAgICAgICAgICAgICAgICBmb3VuZE5vZGUua2V5ID0gbGVmdE5vZGUua2V5O1xyXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kTm9kZS5yaWdodCA9IGxlZnROb2RlLnJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kTm9kZS5sZWZ0ID0gbGVmdE5vZGUubGVmdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGNhc2UgaWYgbm9kZSBoYXMgcmlnaHQgY2hpbGRcclxuICAgICAgICAgICAgICAgIGxldCBsZWZ0TW9zdCA9IGZvdW5kTm9kZS5yaWdodCxcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRMZWZ0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGlmIChsZWZ0TW9zdC5sZWZ0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSBpZiByaWdodCBjaGlsZCBoYXMgbGVmdCBub2RlXHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUobGVmdE1vc3QubGVmdCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRMZWZ0ID0gbGVmdE1vc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnRNb3N0ID0gbGVmdE1vc3QubGVmdDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZm91bmROb2RlLmtleSA9IGxlZnRNb3N0LmtleTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZShsZWZ0TW9zdC5rZXksIHBhcmVudExlZnQsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjYXNlIGlmIHJpZ2h0IGNoaWxkIGRvZXNuJ3QgaGF2ZSBsZWZ0IG5vZGVcclxuICAgICAgICAgICAgICAgICAgICBmb3VuZE5vZGUua2V5ID0gbGVmdE1vc3Qua2V5O1xyXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kTm9kZS5yaWdodCA9IGxlZnRNb3N0LnJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYE5vZGUgLVske3ZhbHVlfV0tIGRvZXNuJ3QgZXhpc3RgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW1vdmVOdWxsTGVhZih0cmVlOiBOb2RlKSB7XHJcbiAgICAgICAgaWYgKHRyZWUubGVmdCAmJiB0cmVlLmxlZnQua2V5ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRyZWUubGVmdCA9IG51bGw7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0cmVlLnJpZ2h0ICYmIHRyZWUucmlnaHQua2V5ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRyZWUucmlnaHQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJlZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2l6ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsZWFyKCkge1xyXG4gICAgICAgIHRoaXMuX3Jvb3QgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2NvdW50ID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbWluKCkge1xyXG4gICAgICAgIGxldCBjdXJyZW50Tm9kZSA9IHRoaXMuX3Jvb3Q7XHJcbiAgICAgICAgd2hpbGUoY3VycmVudE5vZGUubGVmdCAmJiBjdXJyZW50Tm9kZS5sZWZ0LmtleSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjdXJyZW50Tm9kZSA9IGN1cnJlbnROb2RlLmxlZnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjdXJyZW50Tm9kZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbWF4KCkge1xyXG4gICAgICAgIGxldCBjdXJyZW50Tm9kZSA9IHRoaXMuX3Jvb3Q7XHJcbiAgICAgICAgd2hpbGUoY3VycmVudE5vZGUucmlnaHQgJiYgY3VycmVudE5vZGUucmlnaHQua2V5ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnROb2RlID0gY3VycmVudE5vZGUucmlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjdXJyZW50Tm9kZTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vZGUge1xyXG4gICAga2V5OiBudW1iZXI7XHJcbiAgICBsZWZ0OiBOb2RlO1xyXG4gICAgcmlnaHQ6IE5vZGU7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioa2V5OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmtleSA9IGtleTtcclxuICAgICAgICB0aGlzLmxlZnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucmlnaHQgPSBudWxsO1xyXG4gICAgfVxyXG59Il19
